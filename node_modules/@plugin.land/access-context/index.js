
/**
 * Access the context of a single plane. Different from accessing state or the DOM.
 */

module.exports = function(state, action) {
  var context = state.context
  var propertyName = action.input['Property name']
  if (propertyName && propertyName.type) {
    propertyName = state.dispatch(propertyName)
  }

  // Try and get it from the local context first.
  var path = propertyName.replace(/\[[^\]]*\]/g, '').split('/')
  var n = path.length;
  var i = 0;
  var value  = context
  while (value && i < n) {
    value = value[path[i]]
    i++
  }
  return value
}
