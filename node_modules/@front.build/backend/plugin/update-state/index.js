
/**
 * Delegates to a MongoDB implementation.
 *
 * You can create your own that delegates to another database or backend.
 */

module.exports = function(state, action, callback) {
  state.dispatch({
    type: 'Run process',
    input: {
      Actions: [
        {
          type: 'Access config',
          input: {
            'Service name': 'MongoDB'
          },
          output: 'mongo'
        },
        {
          type: 'MongoDB update state',
          input: {
            Properties: action.input.Properties,
            'Property name': action.input['Property name'],
            'Property value': action.input['Property value'],
            'Mongo URI': {
              type: 'Access context',
              input: {
                'Property name': 'mongo/uri'
              }
            }
          }
        }
      ]
    }
  }, callback)
}
