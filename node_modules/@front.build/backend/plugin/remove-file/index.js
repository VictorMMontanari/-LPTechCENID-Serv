
var fs = require('fs')

module.exports = function(state, action, callback) {
  var files = action.input.Files
  var removed = 0

  for (var i = 0, n = files.length; i < n; i++) {
    var file = files[i]
    unlink(file['File path'])
  }

  function unlink(path) {
    fs.unlink(path, function(err){
      if (err) return callback(err)
      removed++
      if (removed == files.length) return callback()
    })
  }
}
